@using Microsoft.AspNetCore.Components.Authorization
@using Microsoft.AspNetCore.Authentication

@inject NavigationManager Navigation
@inject IAuthenticationService authService

<AuthorizeView>
    <Authorized>
        <BarDropdown>
            <BarDropdownToggle>
                <BarIcon IconName="IconName.Key"/>
                Signed in as @context.User.Identity?.Name
            </BarDropdownToggle>
            <BarDropdownMenu>
                <BarDropdownItem To="/Logout">
                    Sign Out
                </BarDropdownItem>
                <BarDropdownItem To="@_discordLink" Target="Target.Blank">
                    Open Discord
                </BarDropdownItem>
            </BarDropdownMenu>
        </BarDropdown>
    </Authorized>
    <NotAuthorized>
        <BarLink To="/Login">
            <BarIcon IconName="IconName.Key"/>
            Log in with Discord
        </BarLink>
    </NotAuthorized>
</AuthorizeView>

@code{
    private string _discordLink = "https://discord.com/channels/@me";
}